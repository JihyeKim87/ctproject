<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>DNA ì—¼ê¸° ì„œì—´ ì¶”ë¡ í•˜ê¸° - CT ê³¼ì •</title>
  <style>
    body { font-family: 'ë§‘ì€ ê³ ë”•', sans-serif; margin: 30px; background: #f8faff;}
    h1 { margin-bottom: 8px; }
    .desc, .rule, .problem { margin-bottom: 18px; }
    .box { background: #fff; border: 1.5px solid #a9b1bc; padding: 16px; border-radius: 12px; margin-bottom: 18px;}
    .tabmenu { display: flex; margin-bottom: 8px; }
    .tabmenu button {
      flex:1; padding: 12px 0; background: #e7ebf0; border:none; border-radius: 14px 14px 0 0;
      font-weight:bold; cursor:pointer; font-size: 1.1em; color:#444; margin-right:2px;
    }
    .tabmenu button.active { background: #fff; border-bottom: 2px solid #fff; color:#1772e2;}
    .tabpanel { display:none; }
    .tabpanel.active { display:block; }
    .timer { font-size: 1.13em; font-weight: bold; margin: 8px 0;}
    input[type="text"] { width: 42px; text-align: center; font-size: 1.1em; margin-right:3px;}
    button { font-size: 1em; padding: 7px 22px; margin-top: 12px;}
    .answer-row { margin-bottom: 8px; }
    .correct { color: #1a8806; font-weight: bold;}
    .wrong { color: #cf2222; font-weight: bold;}
    .hidden { display: none !important;}
    .box select { margin-right: 14px;}
    .choice-grid { display: flex; flex-wrap: wrap; gap:8px; }
    .choice-btn { background: #e7f0fb; border-radius: 6px; padding: 8px 18px; cursor:pointer; border:none; font-size:1em;}
    .choice-btn.selected { background: #1772e2; color:#fff;}
    .tab-title { font-weight:bold; font-size:1.13em; color:#2b3c6b; margin-bottom:6px;}
  </style>
</head>
<body>
  <h1>íƒ€ì´í‹€: DNA ì—¼ê¸° ì„œì—´ ì¶”ë¡ í•˜ê¸°</h1>
  <div class="desc"><b>ëŒ€ìƒ ë° êµê³¼:</b> ê³ 1 (í†µí•©ê³¼í•™1)</div>

  <div class="box desc">
    <b>ë¬¸ì œ ìƒí™©</b><br>
    ë¹„ë²„ëŠ” ì–´ë–¤ ìƒë¬¼ì˜ DNA ì¡°ê°ì„ ë¶„ì„í•˜ê³  ìˆë‹¤.<br>
    DNAëŠ” ì´ì¤‘ ë‚˜ì„  êµ¬ì¡°ì´ë©°, ê° ì—¼ê¸°ëŠ” ìƒë³´ì ì¸ ì—¼ê¸°ì™€ ê²°í•©í•œë‹¤.<br>
    (ê·œì¹™: A &harr; T, G &harr; C)
  </div>

  <div class="box" style="margin-bottom:10px;">
    <b>CT(ì»´í“¨íŒ… ì‚¬ê³ ) ë‹¨ê³„ë³„ ë¬¸ì œ í’€ì´</b><br>
    ê° ë‹¨ê³„ë¥¼ ì°¨ë¡€ë¡œ ëˆŒëŸ¬ê°€ë©° ë¬¸ì œë¥¼ í•´ê²°í•´ ë³´ì„¸ìš”.
  </div>

  <!-- íƒ­ ë©”ë‰´ -->
  <div class="tabmenu">
    <button type="button" class="active" onclick="showTab(0)">1. ë¬¸ì œ ë¶„í•´</button>
    <button type="button" onclick="showTab(1)">2. ì¶”ìƒí™”</button>
    <button type="button" onclick="showTab(2)">3. íŒ¨í„´ ì°¾ê¸°</button>
    <button type="button" onclick="showTab(3)">4. ì•Œê³ ë¦¬ì¦˜</button>
  </div>

  <!-- íƒ­ë³„ íŒ¨ë„ ì˜ì—­ -->
  <div id="tab0" class="tabpanel active">
    <div class="tab-title">ë¬¸ì œ ë¶„í•´: ì£¼ì–´ì§„ ë¬¸ì œë¥¼ ìš”ì†Œë¡œ ë‚˜ëˆ„ì–´ ë³´ê¸°</div>
    <div class="box">
      <b>ì˜ˆì‹œ:</b><br>
      ë¬¸ì œ: "5â€²â€“ ? T A G G ? C ? T A â€“3â€²<br>
      3â€²â€“  A ? ? C C A G T G ? ? â€“5â€²<br>
      <br>
      ê° ê°€ë‹¥ì˜ ì£¼ì–´ì§„ ì •ë³´ì™€ ë¹ˆì¹¸( ? )ì˜ ê°œìˆ˜, ì–‘ìª½ ê°€ë‹¥ì—ì„œ ì•Œ ìˆ˜ ìˆëŠ” ì—¼ê¸°ìŒ ìˆ˜, ì¶”ë¡ í•´ì•¼ í•  ìœ„ì¹˜ ë“±<br>
      <b>ë¬¸ì œë¥¼ ì„¸ë¶€ ìš”ì†Œë¡œ ë¶„í•´í•´ì„œ ì•„ë˜ì— ì…ë ¥í•´ë³´ì„¸ìš”.</b>
      <br><br>
      <textarea id="breakdownArea" rows="5" style="width:98%;"></textarea>
      <br>
      <button onclick="submitBreakdown()">ì…ë ¥ ì™„ë£Œ</button>
      <div id="breakdownResult"></div>
    </div>
  </div>

  <div id="tab1" class="tabpanel">
    <div class="tab-title">ì¶”ìƒí™”: í•µì‹¬ ì •ë³´ ë½‘ì•„ë‚´ê¸°</div>
    <div class="box">
      <b>ë¬¸ì œì—ì„œ ì¶”ë¡ ì— ê¼­ í•„ìš”í•œ ì •ë³´ë§Œ ê³¨ë¼ ì²´í¬í•˜ì„¸ìš”.</b>
      <br><br>
      <div><input type="checkbox" id="ab1"> ìƒë³´ì  ì—¼ê¸°ìŒì˜ ê·œì¹™ (A-T, G-C)</div>
      <div><input type="checkbox" id="ab2"> í•œ ê°€ë‹¥ì—ì„œ ë¹ˆì¹¸ì˜ ìœ„ì¹˜</div>
      <div><input type="checkbox" id="ab3"> ë¹ˆì¹¸ ì•„ë‹Œ ì—¼ê¸°ì˜ ìœ„ì¹˜ì™€ ì¢…ë¥˜</div>
      <div><input type="checkbox" id="ab4"> DNA ì „ì²´ ê¸¸ì´(ì—¼ê¸°ì„œì—´ ê¸¸ì´)</div>
      <div><input type="checkbox" id="ab5"> ê°ì¶°ì§„ ê³³ì´ ì–‘ìª½ì— ë™ì‹œì— ìˆìœ¼ë©´ ì•ˆ ëœë‹¤ëŠ” ì¡°ê±´</div>
      <br>
      <button onclick="submitAbstraction()">ì œì¶œ</button>
      <div id="abstractionResult"></div>
    </div>
  </div>

  <div id="tab2" class="tabpanel">
    <div class="tab-title">íŒ¨í„´(ê·œì¹™) ì°¾ê¸°: ìƒë³´ì  ì—¼ê¸°ìŒ ì°¾ê¸°</div>
    <div class="box">
      <b>ë‹¤ìŒ ì£¼ì–´ì§„ í•œìª½ ê°€ë‹¥ ì—¼ê¸°ì„œì—´ì— ëŒ€í•´, ìƒë³´ì ì¸ ë‹¤ë¥¸ ìª½ ì—¼ê¸°ì„œì—´ì„ ì…ë ¥í•˜ì„¸ìš”.</b>
      <br><br>
      <div id="patternProb"></div>
      <div id="patternInput"></div>
      <button onclick="checkPattern()">ì •ë‹µ í™•ì¸</button>
      <div id="patternResult"></div>
    </div>
  </div>

  <div id="tab3" class="tabpanel">
    <div class="tab-title">ì•Œê³ ë¦¬ì¦˜: ë‹¨ê³„ë³„ë¡œ ì—¼ê¸°ì„œì—´ ì¶”ë¡ </div>
    <div class="box">
      <b>ë³´ê¸°:</b><br>
      <span id="algProb"></span>
      <br><br>
      <b>ë¹ˆì¹¸( ? ) ë¶€ë¶„ì— ë“¤ì–´ê°ˆ ì—¼ê¸°ë¥¼ ì§ì ‘ ì…ë ¥í•´ ë³´ì„¸ìš”.</b><br>
      <div id="algInput"></div>
      <button onclick="checkAlg()">ì •ë‹µ í™•ì¸</button>
      <div id="algResult"></div>
    </div>
  </div>

  <script>
    // íƒ­ ì „í™˜
    function showTab(idx) {
      let tabs = document.querySelectorAll('.tabpanel');
      let btns = document.querySelectorAll('.tabmenu button');
      tabs.forEach((el, i) => el.classList.toggle('active', i===idx));
      btns.forEach((el, i) => el.classList.toggle('active', i===idx));
      if(idx === 2) genPatternProb();
      if(idx === 3) genAlgProb();
    }

    // -------------------- ë¬¸ì œ ë¶„í•´ --------------------
    function submitBreakdown() {
      const txt = document.getElementById('breakdownArea').value.trim();
      if(txt.length < 20) {
        document.getElementById('breakdownResult').innerHTML = '<span class="wrong">ì¡°ê¸ˆ ë” ìì„¸íˆ ë¶„í•´í•´ ì£¼ì„¸ìš”!</span>';
      } else {
        document.getElementById('breakdownResult').innerHTML = '<span class="correct">ì˜í–ˆì–´ìš”! ê° ìš”ì†Œë¥¼ ì„¸ë¶„í™”í•´ ë³´ëŠ” ê³¼ì •ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.</span>';
      }
    }

    // -------------------- ì¶”ìƒí™” --------------------
    function submitAbstraction() {
      let score = 0;
      if(document.getElementById('ab1').checked) score++;
      if(document.getElementById('ab2').checked) score++;
      if(document.getElementById('ab3').checked) score++;
      if(document.getElementById('ab4').checked) score++;
      if(document.getElementById('ab5').checked) score++;
      let msg = '';
      if(score >= 4) msg = '<span class="correct">í•µì‹¬ ì •ë³´ ì¶”ì¶œ ì™„ë£Œ! ëª¨ë“  í•µì‹¬ ìš”ì†Œë¥¼ ì˜ ì„ íƒí–ˆì–´ìš”.</span>';
      else msg = '<span class="wrong">í•„ìš”í•œ í•µì‹¬ ì •ë³´ë¥¼ ëª¨ë‘ ì„ íƒí–ˆëŠ”ì§€ ë‹¤ì‹œ í™•ì¸í•´ë³´ì„¸ìš”.</span>';
      document.getElementById('abstractionResult').innerHTML = msg;
    }

    // -------------------- íŒ¨í„´(ê·œì¹™) ì°¾ê¸° --------------------
    let patSeq = [], patAns = [];
    function randomBase() {
      const b = ['A','T','G','C'];
      return b[Math.floor(Math.random()*4)];
    }
    function compBase(x) {
      if(x==='A') return 'T';
      if(x==='T') return 'A';
      if(x==='G') return 'C';
      if(x==='C') return 'G';
      return '?';
    }
    function genPatternProb() {
      // 8~10ê°œ ëœë¤ ì„œì—´
      let len = 8 + Math.floor(Math.random()*3);
      patSeq = [];
      for(let i=0;i<len;i++) patSeq.push(randomBase());
      patAns = patSeq.map(compBase);
      document.getElementById('patternProb').innerHTML =
        '<b>5â€²â€“ ' + patSeq.join(' ') + ' â€“3â€²</b>';
      let inp = '';
      for(let i=0;i<len;i++) {
        inp += `<input type="text" maxlength="1" id="pat_in${i}" style="width:36px;" autocomplete="off" required>`;
      }
      document.getElementById('patternInput').innerHTML = 'ìƒë³´ì  ê°€ë‹¥(3â€²â€“ ... â€“5â€²): ' + inp;
      document.getElementById('patternResult').innerHTML = '';
    }
    function checkPattern() {
      let correct = true;
      for(let i=0;i<patSeq.length;i++) {
        let v = (document.getElementById('pat_in'+i).value || '').toUpperCase();
        if(v !== patAns[i]) correct = false;
      }
      document.getElementById('patternResult').innerHTML =
        correct
        ? '<span class="correct">ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰</span>'
        : '<span class="wrong">ì˜¤ë‹µì…ë‹ˆë‹¤. ë‹¤ì‹œ í•œ ë²ˆ ê·œì¹™ì„ ì ìš©í•´ ë³´ì„¸ìš”.</span>';
    }

    // -------------------- ì•Œê³ ë¦¬ì¦˜ --------------------
    let algSeq = [], algCompSeq = [], algHideIdx = [];
    function genAlgProb() {
      // 10~12ê°œ ì„œì—´, ìœ—ì¤„ì—ë§Œ 3~4ê°œ ëœë¤ ? (ì•„ë«ì¤„ì€ ëª¨ë‘ ë³´ì„)
      let len = 10 + Math.floor(Math.random()*3);
      algSeq = [], algCompSeq = [];
      for(let i=0;i<len;i++) algSeq.push(randomBase());
      algCompSeq = algSeq.map(compBase);
      let hideCount = 3 + Math.floor(Math.random()*2);
      let idxSet = new Set();
      while(idxSet.size < hideCount) {
        let idx = Math.floor(Math.random()*len);
        if(idx!==0 && idx!==(len-1)) idxSet.add(idx);
      }
      algHideIdx = Array.from(idxSet);
      // ë¬¸ì œ ë³´ê¸°
      let qSeq = algSeq.slice();
      algHideIdx.forEach(idx => { qSeq[idx] = '?'; });
      document.getElementById('algProb').innerHTML =
        `<span style="font-family:Consolas,monospace">5â€²â€“ ${qSeq.join(' ')} â€“3â€²</span><br>
         <span style="font-family:Consolas,monospace">3â€²â€“ ${algCompSeq.join(' ')} â€“5â€²</span>`;
      // ì…ë ¥ë€
      let inp = '';
      for(let i=0;i<len;i++) {
        if(algHideIdx.includes(i)) {
          inp += `<input type="text" maxlength="1" id="alg_in${i}" style="width:36px;" autocomplete="off" required> `;
        } else {
          inp += `<input type="text" maxlength="1" style="width:36px;background:#eee;" disabled value="${algSeq[i]}"> `;
        }
      }
      document.getElementById('algInput').innerHTML = '5â€²â€“ ' + inp + 'â€“3â€²';
      document.getElementById('algResult').innerHTML = '';
    }
    function checkAlg() {
      let correct = true;
      for(let i of algHideIdx) {
        let v = (document.getElementById('alg_in'+i).value || '').toUpperCase();
        if(v !== algSeq[i]) correct = false;
      }
      document.getElementById('algResult').innerHTML =
        correct
        ? '<span class="correct">ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰</span>'
        : '<span class="wrong">ì˜¤ë‹µì…ë‹ˆë‹¤. í•œ ë²ˆ ë” ìƒê°í•´ ë³´ì„¸ìš”.</span>';
    }

    // í˜ì´ì§€ ì²« ì§„ì… ì‹œ, ê°ì¢… íŒ¨ë„/ë¬¸ì œ ì´ˆê¸°í™”
    window.onload = function() {
      showTab(0);
      document.getElementById('breakdownArea').value = '';
      document.getElementById('breakdownResult').innerText = '';
      ['ab1','ab2','ab3','ab4','ab5'].forEach(id=>{ document.getElementById(id).checked = false; });
      document.getElementById('abstractionResult').innerText = '';
      genPatternProb();
      genAlgProb();
    }
  </script>
</body>
</html>
